<!-- A static quiz website with the categories as different pages, load the quesitons from the json file-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pediafor Quiz</title>
    <style>
        body {
            font-family: sans-serif;
        }

        #question-container {
            width: 500px;
            margin: 0 auto;
        }

        #options button {
            display: block;
            margin: 10px 0;
        }
    /* A box with 3px border with around the question-container*/
        #question-container {
            border: 3px solid #000;
            padding: 10px;
        }
            /* A box with 2px border with around the question to separate that from the options*/
        #question {
            border: 2px solid #000;
            padding: 10px;
        }
            /* A box with 2px border with around the options*/
        #options {
            border: 2px solid #000;
            padding: 10px;
        }
        
        /* A box with 2px border with around the next button*/
        #next-button {
            border: 2px solid #000;
            padding: 10px;
        }

        /* All options are stacked vertically with a small border around them with rounded corners*/
        #options button {
            display: block;
            margin: 10px 0;
            border: 1px solid #000;
            border-radius: 5px;
        }
        /* A box with 2px border with around the score*/
        #score {
            border: 2px solid #000;
            padding: 10px;
        }


    </style>
</head>
<body>
    <div id="question-container">
        <h1>Quiz Title</h1>
        <p id="question"></p>
        <div id="options"></div>
        <button id="next-button">Next</button>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let questions = [];

        const questionContainer = document.getElementById('question-container');
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const nextButton = document.getElementById('next-button');

        // A Score variable to keep track of the score and display it at the end
        let score = 0;
        // A Timer of 30 seconds for each question to be answered
        let time = 30;

        // A function to start the timer and skip to next question if the time runs out without increaing the score
        function startTimer() {
            setInterval(function() {
                time--;
                if (time <= 0) {
                    currentQuestionIndex++;
                    showQuestion(currentQuestionIndex);
                    time = 30;
                }
                document.getElementById("timer").innerHTML = time;
            }, 1000);
        }
        // A show timer function that displays the timer on the screen which updates every second and displays the time right
        function showTimer() {
            document.getElementById("timer").innerHTML = time;
            // Timer shows the numbers in red when the time is less than 10 seconds
            if (time < 10) {
                document.getElementById("timer").style.color = "red";
            }
            // Timer is always displayed in the top right corner of the screen
            document.getElementById("timer").style.position = "absolute";
            document.getElementById("timer").style.top = "0px";
            document.getElementById("timer").style.right = "0px";
        }

        // Fetch the questions from the JSON file
        fetch('GeneralKnowledge.json')
            .then(response => response.json())
            .then(data => {
                questions = data.questions;
                showQuestion(currentQuestionIndex);
                startTimer();
                showTimer();
            })
            .catch(error => console.error('Failed to fetch questions:', error));

        function showQuestion(index) {
            if (index < questions.length) {
                const question = questions[index];
                questionElement.textContent = question.question;
                optionsElement.innerHTML = ''; // Clear previous options

                for (let i = 0; i < question.options.length; i++) {
                    const option = document.createElement('button');
                    option.textContent = question.options[i];
                    option.addEventListener('click', () => checkAnswer(index, i));
                    optionsElement.appendChild(option);
                    
                }
            } else {
                // Display the score along with quiz completed message
                optionsElement.textContent = `Your score is ${score} out of ${questions.length}.`;
                // Hide the next button
                nextButton.style.display = 'none';
                // Hide the last question when displaying the score
                questionElement.textContent = '';
                // To restart the quiz a restart button is added
                const restartButton = document.createElement('button');
                restartButton.textContent = 'Restart';
                restartButton.addEventListener('click', () => {
                    currentQuestionIndex = 0;
                    score = 0;
                    showQuestion(currentQuestionIndex);
                    nextButton.style.display = 'block';
                });
                optionsElement.appendChild(restartButton);
            }
        }

        function checkAnswer(questionIndex, optionIndex) {
            if (questions[questionIndex].options[optionIndex] === questions[questionIndex].correctAnswer) {
                // Correct answer
                score++;
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                // Incorrect answer just skip to next question
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        }

        nextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            showQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>
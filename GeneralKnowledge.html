<!-- A static quiz website with the categories as different pages, load the quesitons from the json file-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--Responsive Site-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Favicon and opengraphs -->
    <link rel="icon" href="favicon.png" type="image/png" sizes="16x16">
    <meta property="og:title" content="Pediafor Quiz">
    <meta property="og:description" content="Daily Quizes on General Knowledge by Pediafor">
    <meta property="og:image" content="pediafor_logo.jpg">
    <meta property="og:url" content="https://pediaforquiz.000webhostapp.com/">
    <meta name="description" content="Pediafor Quiz on General Knowledge">

    <title>Pediafor Quiz</title>
    <style>
        * {
            font-family: Montserrat, sans-serif;
        }
        /* The main container that holds the question, options and next button */
        #question-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-top: 50px;
        }
        /* Question text format */
        #question {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        /* The options text format */
        #options button {
            font-size: 16px;
            font-weight: normal;
        }
        /* The next button and restart text format */
        #next-button, #restart-button {
            font-size: 16px;
            font-weight: bold;
        }
        /* The options are arranged vertically and their borders take full width of the screen */
        #options {
            display: flex;
            flex-direction: column;
            width: 100%;
        }
        /* Options are displayed as buttons with a margin of 10px */
        #options button {
            margin: 10px;
            padding: 10px;
            border: 1px solid #4e4e4e;
            border-radius: 5px;
            background-color: #fff;
            cursor: pointer;
        }
        /* The options are highlighted when hovered over and turn blue when selected */
        #options button:hover, #options button.selected {
            background-color: #4e4e4e;
            color: #fff;
        }
        /* The next button and restart buttons in color with hover effect*/
        #next-button, #restart-button {
            margin: 10px;
            padding: 10px;
            border: 1px solid #fff;
            border-radius: 5px;
            background-color: #24a0ed;
            cursor: pointer;
            width: 100%;
            color: #fff;
        }
        /* The next button and restart buttons are highlighted when hovered over and turn blue when selected */
        #next-button:hover, #restart-button:hover {
            background-color: #fff;
            border: 2px solid #24a0ed;
            color: #4e4e4e;
        }
        /* The next and restart are displayed on the same line */
        #btns {
            display: flex;
            flex-direction: row;
            width: 100%;
        }

    </style>
</head>
<body>
    <div id="question-container">
        <h1>General Knowledge Quiz</h1>
        <p id="question"></p>
        <output id="timer"></output>
        <div id="options"></div>
        <div id="btns">
            <button id="next-button">Next</button>
            <button id="restart-button">Restart</button>
    </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let questions = [];

        const questionContainer = document.getElementById('question-container');
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const nextButton = document.getElementById('next-button');

        // A Score variable to keep track of the score and display it at the end
        let score = 0;
        // A Timer of 30 seconds for each question to be answered
        let time = 30;


        // Function for the timer at the timer tag at the top of the page
        function startTimer() {
            var timer = document.getElementById("timer");
            var time = 30 * questions.length;
            var interval = setInterval(function() {
                timer.innerHTML = time;
                time--;
                if (time < 0) {
                    timer.innerHTML = "Time's up!";
                }
                if(time == -1)
                {
                    clearInterval(interval);
                    endQuiz();
                }
            }, 1000);
            
        }
        
        // Function to end the quiz and display the score
        function endQuiz() {
            questionContainer.innerHTML = `<h1>Quiz Completed</h1>
            <h2>Your score is ${score}/${questions.length}</h2>`;
            nextButton.style.display = 'none';
             // Display the score along with quiz completed message
             optionsElement.textContent = `Your score is ${score} out of ${questions.length}.`;
                // To restart the quiz click on the restart button
                document.getElementById("restart-button").addEventListener('click', () => restart());
        }

        // Function for Restart button
        function restart() {
            currentQuestionIndex = 0;
            score = 0;
            showQuestion(currentQuestionIndex);
            nextButton.style.display = 'block';
        }

        // Fetch the questions from the JSON file
        fetch('GeneralKnowledge.json')
            .then(response => response.json())
            .then(data => {
                questions = data.questions;
                showQuestion(currentQuestionIndex);
                startTimer();
                showTimer();
                showResponse();
            })
            .catch(error => console.error('Failed to fetch questions:', error));

            
        function showQuestion(index) {
            if (index < questions.length) {
                const question = questions[index];
                questionElement.textContent = question.question;
                optionsElement.innerHTML = ''; // Clear previous options

                for (let i = 0; i < question.options.length; i++) {
                    const option = document.createElement('button');
                    option.textContent = question.options[i];
                    // Add a click event listener to each option and store the index of the option clicked
                    var index = i;
                    // When next button is clicked, check if the option clicked is correct or not
                    option.addEventListener('click', () => checkAnswer(index, i));
                    optionsElement.appendChild(option);
                    
                }
            } else {
               endQuiz();
            }
        }

        function checkAnswer(questionIndex, optionIndex) {
            if (questions[questionIndex].options[optionIndex] === questions[questionIndex].correctAnswer) {
                // Correct answer
                score++;
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            } else {
                // Incorrect answer just skip to next question
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        }
        // Restart button event listener
        document.getElementById("restart-button").addEventListener('click', () => restart());

        nextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            showQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>